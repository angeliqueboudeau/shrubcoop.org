{{ define "main" }}

<div class="row">
  <div class="col-md-4 order-md-1">

      <div class="front-page-header sloped mb-4">
        <div class="container pl-4 pt-4">
          <div class="row">
            <a class="internal-anchor" name="mailing-list"></a>
            <h1 class="text-white pl-3">{{ .Params.mailing_list_title }}</h1>

          </div>
          {{ if .Params.mailing_list_tagline }}
            <div class="row">

              <div class="col-10">
                <h4 class="text-white">
                  {{ .Params.mailing_list_tagline }}
                </h4>
              </div>
            </div>
          {{ end }}
        </div>
      </div>

    <div class="container">

      <!-- Begin Mailchimp Signup Form -->
      <div id="mc_embed_signup">
        <form action="https://shrubcoop.us4.list-manage.com/subscribe/post?u=a28a538c55f3604b70c8e2cf3&amp;id=c529cb77fc" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          <div id="mc_embed_signup_scroll">

            <div class="form-group mc-field-group">
            	<input type="email" value="" name="EMAIL" class="form-control required email" placeholder="Email Address" id="mce-EMAIL">
            </div>
            <div class="form-group mc-field-group">
            	<input type="text" value="" name="FNAME" class="form-control required" placeholder="First Name" id="mce-FNAME">
            </div>
            <div class="form-group mc-field-group">
            	<input type="text" value="" name="LNAME" class="form-control required" placeholder="Last Name" id="mce-LNAME">
            </div>
            <div id="mergeRow-gdpr" class="mergeRow gdpr-mergeRow content__gdprBlock mc-field-group">
                <div class="content__gdpr">

                    <fieldset class="mc_fieldset gdprRequired mc-field-group mb-2" name="interestgroup_field">
                      <label class="checkbox required subfield" for="gdpr_2061"><input type="checkbox" id="gdpr_2061" name="gdpr[2061]" value="Y" class="av-checkbox "><span> I have read and agree to the <a data-toggle="collapse" href="#newsletter-gdpr" class="link-blue">terms and conditions</a></span> </label>
                    </fieldset>
                    <div id="newsletter-gdpr" class="collapse card card-body mb-4 mt-2">
                      {{ .Params.mailing_list_gdpr_disclaimer | markdownify}}
                    </div>
                </div>
            </div>
            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a28a538c55f3604b70c8e2cf3_c529cb77fc" tabindex="-1" value="">
            </div>

            <input type="submit" value="{{ .Params.mailing_list_button }}" name="subscribe" id="mc-embedded-subscribe" class="btn btn-shrub btn-block m-0">
          </div>

        </form>

        <div id="mce-responses" class="clear mt-4">
          <div class="alert alert-danger" id="mce-error-response" role="alert" style="display: none;"></div>
          <div class="alert alert-success" id="mce-success-response" role="alert" style="display: none;"></div>
        </div>

      </div>
      <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
      <!--End mc_embed_signup-->

    </div>
  </div>

  <div class="col-md-4 order-md-2">
    <div class="front-page-header sloped" style="padding-bottom: 50px;">
      <div class="container pl-4 pt-4">
        <div class="row col-10 col-offset-1">
          <a class="internal-anchor" name="member-signup"></a>
          <h1 class="text-white pl-3">{{ .Params.membership_sign_up_title }}</h1>
          {{ if .Params.membership_sign_up_tagline }}
            <div class="col-10">
              <h4 class="text-white">
                {{ .Params.membership_sign_up_tagline}}
              </h4>

            </div>
          {{ end }}
        </div>
      </div>
    </div>

    <div class="container mb-5">

      {{ .Params.membership_sign_up_body | markdownify }}

      <button class="btn btn-shrub btn-block" data-toggle="modal" data-target="#membershipSignUpModal">{{ .Params.membership_sign_up_button }}</button>
    </div>
  </div>

  <div class="col-md-4 order-md-3">
    <div class="front-page-header sloped">
      <div class="container pl-3 pt-4">
        <a class="internal-anchor" name="volunteer-roles"></a>
        <h1 class="text-white  pl-2">{{ .Params.volunteer_sign_up_title }}</h1>
          {{ if .Params.volunteer_sign_up_tagline }}
            <div class="col-10">
              <h4 class="text-white">
                {{ .Params.volunteer_sign_up_tagline }}
              </h4>
            </div>
          {{ end }}
      </div>
    </div>

    <div class="container mb-5">
      <div id="volunteerRoles" class="text-center mb-4">
        <div class="lds-ellipsis dark"><div></div><div></div><div></div><div></div></div>
      </div>
      <a class="btn btn-block btn-shrub mb-4" href="{{ .Site.BaseURL }}volunteer/">{{ .Params.volunteer_sign_up_button }}</a>
    </div>
  </div>
</div>


<div class="modal fade" id="membershipSignUpModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Membership Sign Up</h2>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="mb-2">
          <span class="flex-shrink-1 ml-2 text-danger">*</span> indicates a required field.
        </p>
        <div class="row">
          <div class="col-md-6 mx-auto">
            <div class="card mb-4">
              <div class="card-body">
                <h3 class="mb-2">Personal Details</h3>


                <div class="d-flex mb-3">
                  <input type="text" class="form-control w-50 memberSignUpFormElement" placeholder="First Name" id="first_name" required />
                  <span class="flex-shrink-1 text-danger mx-2">*</span>
                  <input type="text" class="form-control w-50 memberSignUpFormElement" placeholder="Last Name" id="last_name" required />
                  <span class="flex-shrink-1 text-danger mx-2">*</span>
                </div>


                <p class="mb-1"><b>Date of Birth</b> (must be 16 or over)</p>
                <div class="d-flex" style="padding: 0;">
                  <input type="date" class="form-control w-50 memberSignUpFormElement" placeholder="Date of Birth" id="dob" required />
                  <span class="flex-shrink-1 text-danger mx-2">*</span>
                </div>

             </div>
            </div>

            <div class="card mb-4">
             <div class="card-body">
                <h3 class="mb-2">Contact Details</h3>
                <div class="d-flex mb-2">
                  <input type="email" class="form-control w-100 memberSignUpFormElement" placeholder="Email" id="email" required />
                  <span class="flex-shrink-1 ml-2 text-danger">*</span>
                </div>
                <div class="d-flex mb-2">
                    <textarea type="text" class="form-control w-100 memberSignUpFormElement" placeholder="Address" id="address" required></textarea>
                    <span class="flex-shrink-1 ml-2 text-danger">*</span>
                </div>
                <div class="d-flex mb-2">
                  <input type="text" class="form-control mb-2 w-100 memberSignUpFormElement" placeholder="Phone Number (optional)" id="phone_no">
                  <span class="flex-shrink-1 ml-2">&nbsp;</span>
                </div>

                  <p class="pt-3">Shrub may need to contact me by email about my membership and important news about the organisation such as notifying me about the Annual General Meeting. This does not sign you up to the bi-weekly newsletter</p>
                  <div class="form-check form-check-inline mt-2">
                    <input class="form-check-input memberSignUpFormElement" type="checkbox" id="contact_consent_check" required>
                    <label class="form-check-label">
                        I consent <span class="text-danger">*</span></label>
                  </div>

              </div>
            </div>
          </div>
          <div class="col-md-6 mx-auto">

            <div class="card mb-4">
              <div class="card-body">
                <h3 class="mb-3">Membership Terms</h3>


                <button type="button" class="btn btn-primary btn-block mb-2" data-toggle="collapse" data-target="#ourVision">
                  Our Vision
                </button>

                <div class="collapse mb-2" id="ourVision">
                  <div class="card card-body" id="ourVisionBody"></div>
                </div>

                <button type="button" class="btn btn-primary btn-block mb-2" data-toggle="collapse" data-target="#saferSpacesPolicy">
                  Safer Spaces Policy
                </button>

                <div class="collapse mb-2" id="saferSpacesPolicy">
                  <div class="card card-body" id="saferSpacesPolicyBody"></div>
                </div>

                <button type="button" class="btn btn-primary btn-block mb-2" data-toggle="collapse" data-target="#membershipBenefits">
                  Membership Benefits
                </button>

                <div class="collapse mb-2" id="membershipBenefits">
                  <div class="card card-body" id="membershipBenefitsBody"></div>
                </div>

                <button type="button" class="btn btn-primary btn-block mb-2" data-toggle="collapse" data-target="#privacyNotice">
                  Privacy Policy
                </button>

                <div class="collapse mb-2" id="privacyNotice">
                  <div class="card card-body" id="privacyNoticeBody"></div>
                </div>

                <div class="form-check form-check-inline mt-3">
                  <input class="form-check-input memberSignUpFormElement" type="checkbox" id="our_vision_check" required>
                  <label class="form-check-label">

                    I understand what SHRUB is, our vision, mission and aims, why we do what we do, how we work, the working group structure and open meetings

                    <span class="text-danger">*</span></label>
                </div>

                <div class="form-check form-check-inline mt-4">
                  <input class="form-check-input memberSignUpFormElement" type="checkbox" id="safer_spaces_check" required>
                  <label class="form-check-label">
                    I agree to comply with the safer spaces policy and am aware of the welfare working group and conflict and complaints procedure
                    <span class="text-danger">*</span></label>
                </div>

                <div class="form-check form-check-inline mt-4">
                  <input class="form-check-input memberSignUpFormElement" type="checkbox" id="membership_benefits_check" required>
                  <label class="form-check-label">

                    I understand the benefits of membership

                    <span class="text-danger">*</span></label>
                </div>

                <div class="form-check form-check-inline mt-4">
                  <input class="form-check-input memberSignUpFormElement" type="checkbox" id="privacy_notice_check" name="privacy_notice_check" required>
                  <label class="form-check-label">

                    I agree to the terms of the privacy notice

                    <span class="text-danger">*</span></label>
                </div>

              </div>
            </div>

            <div class="card mb-4">
             <div class="card-body">
                <h3 class="mb-3">Payment Details</h3>

                <div class="form-group">
                  <div class="input-group">
                    <select class="memberSignUpFormElement form-control" id="card_type" required>
                      <option selected disabled>Select card issuer...</option>
                      <option>Visa</option>
                      <option>MasterCard</option>
                      <option>Maestro</option>
                      <option>AmericanExpress</option>
                      <option>Discover</option>
                      <option>VisaElectron</option>
                    </select>
                    <span class="flex-shrink-1 text-danger mx-2">*</span>
                  </div>

                </div>

                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">&#128179;</span>
                      </div>
                      <input type="text" class="memberSignUpFormElement form-control" id="card_number" placeholder="Card Number" required>
                      <span class="flex-shrink-1 text-danger mx-2">*</span>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text">&#128100;</span>
                      </div>
                      <input type="text" class="memberSignUpFormElement form-control" id="cardholder_name"  placeholder="Cardholder Name" required>
                      <span class="flex-shrink-1 text-danger mx-2">*</span>
                    </div>
                  </div>

                  <div class="row">
                      <div class="col-sm-8">
                          <div class="form-group">

                            <div class="form-inline">

                              <select class="memberSignUpFormElement form-control" style="width: 40%;" id="expiry_month" required>
                                <option selected disabled>Month</option>
                              </select>

                              <span style="width:5%; text-align: center"> / </span>

                              <select class="memberSignUpFormElement form-control" style="width: 40%;" id="expiry_year" required>
                                <option selected disabled>Year</option>
                              </select>

                              <span class="text-danger text-center" style="width: 5%;">*</span>

                            </div>

                          </div>
                        </div>

                      <div class="col-sm-4">
                          <div class="form-group">
                            <div class="input-group">
                              <input class="memberSignUpFormElement form-control" placeholder="CVV" required="" type="text" maxlength="3" id="cvv" required>
                              <span class="flex-shrink-1 text-danger mx-2">*</span>
                            </div>
                          </div>
                      </div>
                  </div>
              </div>
            </div>

          </div>
        </div>

        <div class="row mt-3 mb-3">
          <div class="col-md-8 mx-auto">

            <div id="memberSignUpErrorAlert" class="alert alert-danger d-none" role="alert">
              <h4 class="alert-heading">Uh-oh!</h4>
              <div id="memberSignUpErrorContent"></div>
              <hr>
              <p class="mb-0">If you are experiencing issues please <a href="mail-to:{{ .Site.Params.webmasterEmail }}">contact the webmaster</a>.</p>
            </div>

          </div>
        </div>

        <div class="row">
          <div class="col-md-8 mx-auto">
            <div id="memberSignUpSuccessAlert" class="alert alert-success d-none" role="alert">
              <h4 class="alert-heading">Success!</h4>
              <div id="memberSignUpSuccessContent"></div>
            </div>

          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="completeSignUpButton">Complete Sign Up</button>
      </div>
    </div>
  </div>
</div>
-->

<script src="{{ .Site.BaseURL }}js/volunteer-roles.js"></script>
<script src="{{ .Site.BaseURL }}js/validation-methods.js"></script>
<script src="{{ .Site.BaseURL }}js/membership-signup.js"></script>

<script>
var BaseURL = "{{ .Site.BaseURL }}";
var murakamiRolesKey = "{{ .Site.Params.murakamiRolesKey }}"
var membershipSignUpKey = "{{ .Site.Params.murakamiMembershipSignUpKey }}"
var rolesLimit = 3;
var truncateRoleDescriptions = true;

$(document).ready(function(){
  getAllVolunteerRoles()

  var date = new Date();
  $('#dob').prop('max', (date.getFullYear()-16)+"-"+
                        ('0' + (date.getMonth()+ +1)).slice(-2)+"-"+
                        ('0' + date.getDate()).slice(-2));
  $("#completeSignUpButton").on('click', function(){
    completeSignUp();
  })

  // Populate card expiration fields.

  var expiry_month_select = document.getElementById("expiry_month");
  var expiry_year_select = document.getElementById("expiry_year");

  for (i = 0; i < validMonths.length; i++) {
    var month = document.createElement("option");
    month.innerHTML = validMonths[i];
    expiry_month_select.appendChild(month);

    var year = document.createElement("option");
    year.innerHTML = validYears[i];
    expiry_year_select.appendChild(year);
  }

  getSignUpInfo(function(signUpInfo){
    $("#ourVisionBody").html(signUpInfo.ourVision.markup);
    $("#saferSpacesPolicyBody").html(signUpInfo.saferSpacesPolicy.markup);
    $("#membershipBenefitsBody").html(signUpInfo.membershipBenefits.markup);
    $("#privacyNoticeBody").html(signUpInfo.privacyNotice.markup);
  });

})

</script>

{{ end }}
